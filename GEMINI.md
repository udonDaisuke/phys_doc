# 指示
本指示書にしたがい、下記処理を自動実行してください。
フォルダ直下のpdfファイルの一覧を表示させて、
まず##セクション一覧を表示し、何を実施するか確認してください。
一覧の上に現在対象としているプロジェクトフォルダの名前を表示してください。
プロジェクト名の横にはタスク進捗率を示してください、進捗率の定義は下に書きます。
※注意：src内のデータは改変しようとしないこと
 ～サンプル～
 ※文字色は機能名は明るい暖色で表示すること
   機能一覧は枠で囲う。位置ずれが発生しないように語尾調整してきれいな枠を作ってください
   ```bash 
   # sample　枠をきれいに表示できるようスペースの数は適宜調整すること
   ┌─ PDF➡MD MENU ───────────────┐
   │ 0. 各プロジェクトの進捗率      │
   │ 1. PDFをマークダウンに変換     │
   │ 2. 数式の修正                 │
   │ 3. 翻訳                      │
   └──────────────────────────────┘
  ```

## 注意事項
- `respect_git_ignore=False`として、ファイルアクセスを行う。ファイルやフォルダが検出されなかった場合はこちらを試す。
- `src`フォルダ以下の階層のファイルの変更提案はこちらが求めない限り絶対にしないこと
- 新規ファイルフォルダの生成は原則禁止とし、やむを得ない場合は`tmp_script`フォルダを使用すること

## gemini用のスクリプト
下記スクリプトの使用を許可します。改変は禁止です。
```yaml
scripts_for_gemini:
  - script : 
      usecase: "フォルダの作成が必要になる場合"
      name : "mkdir.py"
      location: "./for_gemini"
      description : "指定したフォルダを作成する" 
      args : 
        - value : "フォルダパス(クオーテーションマークなしで与えること)" 
  - script : 
      usecase: "ファイル名の無効な文字列の除去・名称変更"
      name : "rename.py"
      location: "./for_gemini"
      description : "指定したフォルダ・ファイルの名前を変更する" 
      args : 
        - value : "対象ファイルのパス(クオーテーションマークなしで与えること)" 
        - value : "対象ファイルの変更後パス(クオーテーションマークなしで与えること)" 
```





# 機能
## 既存プロジェクトの進捗状況
1. pdfファイルと同名のフォルダ名をもつ場合をプロジェクトとみなし、それらを表示する。
1. 下記のようなスタイルで表示する　
  - プロジェクト名：文字色は暖色で表示する
  - プログレスバーは緑系の明るい色で表示する
  - 協会のラインは青色で表示する
  - タイトルと進捗の項目ごろに記号を表示し、⬚：未着手、✨：作業中、✅：完了
```bash
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 
✨ Lectures_on_Phase_Field
Overall       
 ┃ [ ■■■□□□□□□□□□□□□□□□□□ ] 17.5%
 ┃━ markdownへの変換 ✅
 ┃ [ ■■■■■■■■■■■■■■■■■■■■ ] xx chapters.
 ┣━ 数式補完 ✨
 ┃ [ ■■■■■■■□□□□□□□□□□□□□ ] yy/xx files.
 ┗━ 翻訳 ⬚      
   [ □□□□□□□□□□□□□□□□□□□□ ] zz/xx files.
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 
:
つづく
：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 

```
### プロジェクト進捗率の定義
下記ルールに従って計算する。
- 進捗率 = 完了ファイル数/想定アウトプットファイルの総数
- 想定アウトプットファイルの総数
  - 以降のセクションの機能をすべて実行した場合のファイルの総数を見積もる
- 完了ファイル数
  - 以降のセクションの機能ごとのアウトプットフォルダに生成した。ファイルの総数



## PDFをマークダウンに変換
1. 本階層にあるpdfファイルをリストアップし、番号で、ファイル選択をさせる。
1. srcフォルダの親フォルダに現在いることを確認し、`uv run -m src.pdf2md xxxx.pdf`を実行する。xxxxは先に選択したファイル名とする。コマンドではファイル名にクオーテーションマークを付けたりせずそのまま書くこと。
1. 続いて、`## 数式の修正` の内容を実行するか確認する。

## 数式の修正
1. projectsフォルダ内のサブフォルダにoutput_originalという名前のフォルダを持つフォルダを番号付きで表示し、選択させてください。※前の工程から引き続きの場合は対象フォルダを引き継いでください。対象のフォルダ名は表示すること
1. 選択したフォルダの中にある、output_originalフォルダ内にある、ｍｄファイル一覧を番号付きで表示し、選択させてください。
1. output_originalと同階層にoutput_original__math_fixフォルダがない場合は作成してください。
1. 先に選択したｍｄファイルの内容すべてを読み取り、数式と思われる個所をLATEX表記で書き換えたものを考え、同じファイル名でoutput_original__math_fixフォルダに保存してください。置換はあなたが直接生成する形をとり、もとのドキュメントの構成を維持してください。数式の予想が必要な場合は文脈やWEB検索の内容を取り入れながら完璧な補完を心がけてください。もし初めに選択したファイルがなぜか見つからない場合パスの指定の仕方を見直してください。なお、対象となる数式が存在しない場合はファイルをそのまま複製するようにしてください。(数が合わなくなると進捗率がわからなくなる)
1. `## 翻訳`に記載した内容を実行するか確認する

### 翻訳
1. projectsフォルダ内のサブフォルダにoutput_original___math_fixという名前のフォルダを持つフォルダを番号付きで表示し、選択させてください。※前の工程から引き続きの場合は対象フォルダを引き継いでください。対象のフォルダ名は表示すること。
1. 変換する言語を聞いてください。デフォルトはユーザーの母国語に合わせてください。
1. output_originalと同階層にoutput_translated__math_fixフォルダがない場合は作成してください。
1. 選択したフォルダの中にある、output_original___math_fixというフォルダ内にある、ｍｄファイル一覧を番号付きで表示し、選択させてください。
1. 選択したｍｄファイルを読み取り、ユーザーが指定した言語に変換してください。その際、数式や記号などは元の状態を維持すること。専門用語は無理に翻訳せず、英語表現を優先してください。修正版のMDファイルはファイル名末尾、拡張子の前に`__XX`とつけて(XXは言語を表す半角英字)，選択したoutput_original___math_fixと同階層にあるoutput_translated__math_fixというフォルダを作成し、その中に保存してください。選択したファイルがなぜか見つからない場合パスの指定の仕方を見直してください。文体はフォーマルである必要は必ずしもないが、口癖や個性を出さないような一般的なものを用いてください。

